# 카테고리 구조 설계 의사결정 (2026-01-17)

## 배경
사용자는 건설자재(가설재, 유로폼 등)를 판매하는 이커머스 시스템을 구축 중이다. 상품 탐색 UX는 `대분류 -> 상태(신재/고재) -> 품목 -> 규격` 순으로 좁혀가는 Wizard 방식을 원한다.

## 고민: 계층형 트리 vs 속성 필터

### 1. 계층형 트리 방식 (Full Hierarchy)
모든 분류 단계를 카테고리 데이터(`categories` 테이블의 Depth)로 관리하는 방식.
*   구조: `가설재(1)` > `신재(2)` > `파이프(3)` > `3m(4)`
*   **문제점:**
    *   동일한 규격(예: `3m`, `파이프`)이 상위 속성(`신재`, `고재`)에 따라 중복 생성되어야 함.
    *   운영자가 신규 규격 추가 시, 모든 상위 조건(`신재`, `고재`, `수리품` 등)마다 일일이 카테고리를 중복 등록해야 함 (운영 비효율).

### 2. 속성 필터 방식 (Category + Attributes) - **채택** 
카테고리는 최상위 대분류(`가설재`, `유로폼`)만 관리하고, 나머지 분류 기준(`상태`, `품목`, `규격`)은 상품의 **속성(Column)**으로 관리하는 방식.

*   구조:
    *   **Category:** `가설재`
    *   **Product Attributes:** `grade='신재'`, `item='파이프'`, `spec='3m'`
*   **장점:**
    *   **데이터 정규화:** 규격이나 품목 정보가 중복되지 않고 상품 정보에 귀속됨.
    *   **운영 효율성:** 상품 등록 시 속성값만 입력하면 끝. 카테고리 트리를 관리할 필요가 없음.
    *   **UX 유연성:** DB 구조는 플랫하지만, 프론트엔드에서 얼마든지 Wizard(순차 선택) 방식의 UI를 구현할 수 있음 (`SELECT DISTINCT` 활용).

## 결론
건설자재 도메인의 분류 체계가 정형화(`대분류 -> 상태 -> 품목 -> 규격`)되어 있고, 데이터 관리 효율성을 위해 **속성 필터 방식**을 채택한다.

### DB Schema 반영
1.  **categories:** 대분류 관리용으로 유지 (단순화).
2.  **products:** `category_id` 외에 `grade`(상태), `item_name`(품목), `spec`(규격) 컬럼 추가.
